<script>
    $(document).ready(function () {
        var editor = ace.edit("editor");
        var editor_input = ace.edit("editor__input");

        function setEditor() {
            editor.setTheme("ace/theme/monokai");
            editor.session.setMode("ace/mode/javascript");
            editor.setOptions({
                autoScrollEditorIntoView: true,
                copyWithEmptySelection: true,
            });
// use setOptions method
            editor.setOption("mergeUndoDeltas", "always");
            editor.session.setMode("ace/mode/javascript");
            editor.session.setTabSize(4);
            editor.setHighlightActiveLine(true);
        };
        function setEditor_Input() {
            editor_input.setTheme("ace/theme/monokai");
            editor_input.session.setMode("ace/mode/javascript");
            editor_input.setOptions({
                autoScrollEditorIntoView: true,
                copyWithEmptySelection: true,
            });
        };
        setEditor();
        setEditor_Input();

        const executeCodeBtn = document.querySelector('.editor__run');
        const resetCodeBtn = document.querySelector('.editor__reset');

        executeCodeBtn.addEventListener('click', () => {
            // Get input from the code editor
            var userCode = editor.getValue();
            var userInput = editor_input.getValue();
            console.log(userInput)
            // Run the user code
            let formData = new FormData();
            formData.append('code', userCode);
            formData.append('input', userInput)
            console.log(formData)
            if (formData) {
                $.ajax({
                    url: '{% url "runcode"%}',
                    method: 'POST',
                    data: formData,
                    dataType : 'json',
                    processData: false,
                    contentType: false,
                    success: function (data) {
                        $('#output__container').html(data['output'])
                        console.log(data);
                    }

                });
            }
        });
    });

</script>